*banana-scripting.txt*            For             Last change: 2025 January 23

==============================================================================
Table of Contents                         *banana-scripting-table-of-contents*

1. Scripting                                      |banana-scripting-scripting|
  - separate files                 |banana-scripting-scripting-separate-files|
  - embedded                             |banana-scripting-scripting-embedded|

==============================================================================
1. Scripting                                      *banana-scripting-scripting*

There are two scripting methods available: separate lua files and embedded lua.


SEPARATE FILES                     *banana-scripting-scripting-separate-files*

Of the two, separate lua files has much better support (lsp and parameter
passing).

Loading a separate lua file into an nml document is very simple:

>html
    <script src="lua require path"></script>
<

this will work if the script returns either a function or a table with a key of
__banana_run that is a function.

>lua
    --- Add types for luals
    ---@param document Banana.Instance
    ---@param opts table
    return function(document, opts)
        -- any params passed from ?param=value
        -- only supported on loadNmlTo currently
        local params = opts.params
        local element = document:getElementById("asdf")
    end
    -- also allowed
    return {
      -- ... other keys
      __banana_run = function(document, opts)
        -- scripting code
      end,
    }
<


EMBEDDED                                 *banana-scripting-scripting-embedded*

Embedded lua is also very simple, banana predefines the document variable for
you:

>html
    <script>
      local element = document:getElementById("asdf")
    </script>
<

Generated by panvimdoc <https://github.com/kdheepak/panvimdoc>

vim:tw=78:ts=8:noet:ft=help:norl:
